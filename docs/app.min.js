"use strict";!function(){angular.module("openWeather",["openWeather.services","openWeather.controllers","openWeather.directives"])}();
"use strict";!function(){function t(t){function n(n){function e(n){return!!n&&t.get(i+n._id).then(a)["catch"](c)}function a(t){return t.data.list.map(u),t.data}function c(t){console.log(t.data)}function u(t){return t.weather[0].icon=""+o+t.weather[0].icon+".png"}function h(n){return t.get(r).then(function(t){var e=new RegExp("^"+n+"$","i");return _.find(t.data,function(t){return t.name.match(e)})})["catch"](function(t){console.log(t.data)})}return h(n).then(e)}var e=this,a="c5ac0098c8c7b7a5512b4679a5b11f9f",c="http://api.openweathermap.org/data/2.5/",r="city.list.json",i=c+"/forecast/daily?APPID="+a+"&units=metric&cnt=6&id=",o="http://openweathermap.org/img/w/";e.getForecast=n}angular.module("openWeather.services",[]).service("weatherAPIService",t),t.$inject=["$http"]}();
"use strict";!function(){function e(e,t,n){function s(){d(),g.citiesNames.map(function(e){g.requests.push(i(e))}),n.all(g.requests).then(function(){u(3e3,"All requests are done.")})}function i(t){return e.getForecast(t).then(function(e){return e?a(e):void c(t)})}function a(e){return g.citiesObjects.unshift(e),f(e.city.name),e}function c(e){m("Could not find city: "+e)}function r(){l()?(m("City already present, please add another city"),u()):(d(),i(g.newCity).then(function(){g.newCity="",u()}))}function o(e){g.citiesObjects.splice(e,1)}function l(){var e=new RegExp("^"+g.newCity+"$","i");return _.find(g.citiesObjects,function(t){return t.city.name.match(e)})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n&&(g.alert.message=n),t(function(){g.alert.message="",g.alert.cssClass="alert-success"},e)}function f(e){g.alert.message=e+" was added successfully",g.alert.cssClass="alert-success"}function d(){g.alert.message="Fetching data, please wait...",g.alert.cssClass="alert-info"}function m(e){g.alert.message=e,g.alert.cssClass="alert-danger"}var g=this;g.newCity="",g.alert={},g.requests=[],g.citiesObjects=[],g.onSubmit=r,g.getForecast=i,g.removeCity=o,g.citiesNames=["London","Amsterdam","Paris","Tel Aviv"],s()}angular.module("openWeather.controllers",[]).controller("mainController",e),e.$inject=["weatherAPIService","$timeout","$q"]}();
"use strict";!function(){function t(){function t(t){function n(){return t.city.list}function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n()[t].weather[0]}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e(t).icon}function r(){return t.city.city.name}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e(t).description}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n()[t].temp}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 1e3*n()[t].dt}t.name=r(),t.iconUrl=i(),t.description=c(),t.maxTemp=o().max,t.minTemp=o().min,t.date=u(),t.getParsedDate=u,t.getIconUrl=i,t.getDescription=c}var n={restrict:"E",templateUrl:"directives/city/city.html",link:t,scope:{city:"="}};return n}angular.module("openWeather.directives",[]).directive("city",t)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNlcnZpY2VzL3dlYXRoZXJBUElTZXJ2aWNlLmpzIiwiY29udHJvbGxlcnMvbWFpbkNvbnRyb2xsZXIuanMiLCJkaXJlY3RpdmVzL2NpdHkvY2l0eS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwid2VhdGhlckFQSVNlcnZpY2UiLCIkaHR0cCIsImdldEZvcmVjYXN0IiwiY2l0eU5hbWUiLCJnZXRDaXR5T2JqZWN0Q29tcGxldGUiLCJyZXNwb25zZSIsImdldCIsIkZPUkVDQVNUX1VSTCIsIl9pZCIsInRoZW4iLCJnZXRGb3JlY2FzdENvbXBsZXRlIiwiZ2V0Rm9yZWNhc3RGYWlsZWQiLCJkYXRhIiwibGlzdCIsIm1hcCIsInNldEljb25VcmwiLCJjb25zb2xlIiwibG9nIiwiY2l0eU9iamVjdCIsIndlYXRoZXIiLCJpY29uIiwiSUNPTlNfQkFTRV9VUkwiLCJnZXRDaXR5T2JqZWN0IiwiQ0lUSUVTX0pTT04iLCJyZWdleCIsIlJlZ0V4cCIsIl8iLCJmaW5kIiwibmFtZSIsIm1hdGNoIiwiY29udGV4dCIsInRoaXMiLCJBUElfS0VZIiwiQkFTRV9BUElfVVJMIiwic2VydmljZSIsIiRpbmplY3QiLCJtYWluQ29udHJvbGxlciIsIiR0aW1lb3V0IiwiJHEiLCJpbml0IiwiYWxlcnRGZXRjaGluZyIsInZtIiwiY2l0aWVzTmFtZXMiLCJyZXF1ZXN0cyIsInB1c2giLCJhbGwiLCJyZXNldEFsZXJ0T2JqZWN0IiwiZ2V0Rm9yZWNhc3RTdWNjZXNzIiwiY2l0aWVzT2JqZWN0cyIsInVuc2hpZnQiLCJhbGVydFN1Y2Nlc3MiLCJjaXR5IiwiYWxlcnRFcnJvciIsIm9uU3VibWl0IiwiaXNDaXR5SW5MaXN0IiwibmV3Q2l0eSIsInJlbW92ZUNpdHkiLCJpbmRleCIsInNwbGljZSIsImRlbGF5IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibWVzc2FnZSIsImFsZXJ0IiwiY3NzQ2xhc3MiLCJjb250cm9sbGVyIiwibGluayIsInNjb3BlIiwiZ2V0Rm9yZWNhc3RMaXN0IiwiZ2V0V2VhdGhlck9iamVjdCIsImdldEljb25VcmwiLCJnZXROYW1lIiwiZ2V0RGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImdldFRlbXBlcmF0dXJlIiwidGVtcCIsImdldFBhcnNlZERhdGUiLCJkdCIsImljb25VcmwiLCJtYXhUZW1wIiwibWF4IiwibWluVGVtcCIsIm1pbiIsImRhdGUiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUFBLFdBSUNBLFFBQ0VDLE9BQU8sZUFDUCx1QkFDQSwwQkFDQTtBQ1JILGNBQUEsV0FVQyxRQUFTQyxHQUFrQkMsR0FXMUIsUUFBU0MsR0FBWUMsR0FLcEIsUUFBU0MsR0FBc0JDLEdBQzlCLFFBQUlBLEdBQ0lKLEVBQU1LLElBQUlDLEVBQWVGLEVBQVNHLEtBQ3ZDQyxLQUFLQyxHQURBVCxTQUVDVSxHQUtWLFFBQVNELEdBQW9CTCxHQUk1QixNQUZBQSxHQUFTTyxLQUFLQyxLQUFLQyxJQUFJQyxHQUVoQlYsRUFBU08sS0FHakIsUUFBU0QsR0FBa0JOLEdBQzFCVyxRQUFRQyxJQUFJWixFQUFTTyxNQUd0QixRQUFTRyxHQUFXRyxHQUNuQixNQUFPQSxHQUFXQyxRQUFRLEdBQUdDLEtBQXRCLEdBQWdDQyxFQUFpQkgsRUFBV0MsUUFBUSxHQUFHQyxLQUF2RSxPQUdSLFFBQVNFLEdBQWNuQixHQUN0QixNQUFPRixHQUFNSyxJQUFJaUIsR0FDZmQsS0FBSyxTQUFVSixHQUNmLEdBQUltQixHQUFRLEdBQUlDLFFBQU8sSUFBTXRCLEVBQVcsSUFBSyxJQUU3QyxPQUFPdUIsR0FBRUMsS0FBS3RCLEVBQVNPLEtBQU0sU0FBVU0sR0FDdEMsTUFBT0EsR0FBV1UsS0FBS0MsTUFBTUwsT0FMekJ2QixTQU9HLFNBQVVJLEdBQ2xCVyxRQUFRQyxJQUFJWixFQUFTTyxRQXBDeEIsTUFBT1UsR0FBY25CLEdBQ25CTSxLQUFLTCxHQVpSLEdBQUkwQixHQUFtQkMsS0FD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QUFBLEdBQUFDLFNBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFILENBQzNCLE9BQU9VLEdBQWlCYixHQUFPckMsS0FHaEMsUUFBU29ELEtBQ1IsTUFBT0osR0FBTWpCLEtBQUtBLEtBQUt2QixLQUd4QixRQUFTNkMsS0FBMEIsR0FBWGhCLEdBQVdHLFVBQUFDLE9BQUEsR0FBQUMsU0FBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUgsQ0FDL0IsT0FBT1UsR0FBaUJiLEdBQU9pQixZQUdoQyxRQUFTQyxLQUEwQixHQUFYbEIsR0FBV0csVUFBQUMsT0FBQSxHQUFBQyxTQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBSCxDQUMvQixPQUFPUyxLQUFrQlosR0FBT21CLEtBR2pDLFFBQVNDLEtBQXlCLEdBQVhwQixHQUFXRyxVQUFBQyxPQUFBLEdBQUFDLFNBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFILENBQzlCLE9BQXFDLEtBQTlCUyxJQUFrQlosR0FBT3FCLEdBcENqQ1YsRUFBTXhDLEtBQWM0QyxJQUNwQkosRUFBTVcsUUFBY1IsSUFDcEJILEVBQU1NLFlBQWNELElBQ3BCTCxFQUFNWSxRQUFjTCxJQUFpQk0sSUFDckNiLEVBQU1jLFFBQWNQLElBQWlCUSxJQUNyQ2YsRUFBTWdCLEtBQWNQLElBRXBCVCxFQUFNUyxjQUFpQkEsRUFDdkJULEVBQU1HLFdBQWlCQSxFQUN2QkgsRUFBTUssZUFBaUJBLEVBdEJ4QixHQUFJWSxJQUNIQyxTQUFVLElBQ1ZDLFlBQWEsNEJBQ2JwQixLQUFNQSxFQUNOQyxPQUNDakIsS0FBTSxLQUlSLE9BQU9rQyxHQWRSdkYsUUFDRUMsT0FBTyw2QkFDUHNGLFVBQVUsT0FBUWxDIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdvcGVuV2VhdGhlcicsIFtcblx0XHRcdCdvcGVuV2VhdGhlci5zZXJ2aWNlcycsXG5cdFx0XHQnb3BlbldlYXRoZXIuY29udHJvbGxlcnMnLFxuXHRcdFx0J29wZW5XZWF0aGVyLmRpcmVjdGl2ZXMnXG5cdFx0XSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnb3BlbldlYXRoZXIuc2VydmljZXMnLCBbXSlcblx0XHQuc2VydmljZSgnd2VhdGhlckFQSVNlcnZpY2UnLCB3ZWF0aGVyQVBJU2VydmljZSk7XG5cblx0d2VhdGhlckFQSVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuXHRmdW5jdGlvbiB3ZWF0aGVyQVBJU2VydmljZSgkaHR0cCkge1xuXG5cdFx0dmFyIGNvbnRleHQgICAgICAgICAgPSB0aGlzO1xuXHRcdGNvbnN0IEFQSV9LRVkgICAgICAgID0gJ2M1YWMwMDk4YzhjN2I3YTU1MTJiNDY3OWE1YjExZjlmJztcblx0XHRjb25zdCBCQVNFX0FQSV9VUkwgICA9ICdodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS8nO1xuXHRcdGNvbnN0IENJVElFU19KU09OICAgID0gJ2NpdHkubGlzdC5qc29uJztcblx0XHRjb25zdCBGT1JFQ0FTVF9VUkwgICA9IGAke0JBU0VfQVBJX1VSTH0vZm9yZWNhc3QvZGFpbHk/QVBQSUQ9JHtBUElfS0VZfSZ1bml0cz1tZXRyaWMmY250PTYmaWQ9YDtcblx0XHRjb25zdCBJQ09OU19CQVNFX1VSTCA9ICdodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93Lyc7XG5cblx0XHRjb250ZXh0LmdldEZvcmVjYXN0ID0gZ2V0Rm9yZWNhc3Q7XG5cblx0XHRmdW5jdGlvbiBnZXRGb3JlY2FzdChjaXR5TmFtZSkge1xuXG5cdFx0XHRyZXR1cm4gZ2V0Q2l0eU9iamVjdChjaXR5TmFtZSlcblx0XHRcdFx0LnRoZW4oZ2V0Q2l0eU9iamVjdENvbXBsZXRlKTtcblxuXHRcdFx0ZnVuY3Rpb24gZ2V0Q2l0eU9iamVjdENvbXBsZXRlKHJlc3BvbnNlKSB7XG5cdFx0XHRcdGlmIChyZXNwb25zZSkge1xuXHRcdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoRk9SRUNBU1RfVVJMICsgcmVzcG9uc2UuX2lkKVxuXHRcdFx0XHRcdFx0LnRoZW4oZ2V0Rm9yZWNhc3RDb21wbGV0ZSlcblx0XHRcdFx0XHRcdC5jYXRjaChnZXRGb3JlY2FzdEZhaWxlZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGdldEZvcmVjYXN0Q29tcGxldGUocmVzcG9uc2UpIHtcblx0XHRcdFx0Ly8gU2V0IHRoZSBiYXNlIHVybCBmb3IgYWxsIHRoZSBpY29uc1xuXHRcdFx0XHRyZXNwb25zZS5kYXRhLmxpc3QubWFwKHNldEljb25VcmwpO1xuXG5cdFx0XHRcdHJldHVybiByZXNwb25zZS5kYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBnZXRGb3JlY2FzdEZhaWxlZChyZXNwb25zZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gc2V0SWNvblVybChjaXR5T2JqZWN0KSB7XG5cdFx0XHRcdHJldHVybiBjaXR5T2JqZWN0LndlYXRoZXJbMF0uaWNvbiA9IGAke0lDT05TX0JBU0VfVVJMfSR7Y2l0eU9iamVjdC53ZWF0aGVyWzBdLmljb259LnBuZ2A7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGdldENpdHlPYmplY3QoY2l0eU5hbWUpIHtcblx0XHRcdFx0cmV0dXJuICRodHRwLmdldChDSVRJRVNfSlNPTilcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ14nICsgY2l0eU5hbWUgKyAnJCcsICdpJyk7XG5cblx0XHRcdFx0XHRcdHJldHVybiBfLmZpbmQocmVzcG9uc2UuZGF0YSwgZnVuY3Rpb24gKGNpdHlPYmplY3QpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNpdHlPYmplY3QubmFtZS5tYXRjaChyZWdleCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnb3BlbldlYXRoZXIuY29udHJvbGxlcnMnLCBbXSlcblx0XHQuY29udHJvbGxlcignbWFpbkNvbnRyb2xsZXInLCBtYWluQ29udHJvbGxlcik7XG5cblx0bWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnd2VhdGhlckFQSVNlcnZpY2UnLCAnJHRpbWVvdXQnLCAnJHEnXTtcblxuXHRmdW5jdGlvbiBtYWluQ29udHJvbGxlcih3ZWF0aGVyQVBJU2VydmljZSwgJHRpbWVvdXQsICRxKSB7XG5cdFx0dmFyIHZtICAgICAgICAgICA9IHRoaXM7XG5cdFx0dm0ubmV3Q2l0eSAgICAgICA9ICcnO1xuXHRcdHZtLmFsZXJ0ICAgICAgICAgPSB7fTtcblx0XHR2bS5yZXF1ZXN0cyAgICAgID0gW107XG5cdFx0dm0uY2l0aWVzT2JqZWN0cyA9IFtdO1xuXHRcdHZtLm9uU3VibWl0ICAgICAgPSBvblN1Ym1pdDtcblx0XHR2bS5nZXRGb3JlY2FzdCAgID0gZ2V0Rm9yZWNhc3Q7XG5cdFx0dm0ucmVtb3ZlQ2l0eSAgICA9IHJlbW92ZUNpdHk7XG5cdFx0dm0uY2l0aWVzTmFtZXMgICA9IFsnTG9uZG9uJywgJ0Ftc3RlcmRhbScsICdQYXJpcycsICdUZWwgQXZpdiddO1xuXG5cdFx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRcdGFsZXJ0RmV0Y2hpbmcoKTtcblxuXHRcdFx0dm0uY2l0aWVzTmFtZXMubWFwKGZ1bmN0aW9uIChjaXR5TmFtZSkge1xuXHRcdFx0XHR2bS5yZXF1ZXN0cy5wdXNoKGdldEZvcmVjYXN0KGNpdHlOYW1lKSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JHEuYWxsKHZtLnJlcXVlc3RzKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmVzZXRBbGVydE9iamVjdCgzMDAwLCAnQWxsIHJlcXVlc3RzIGFyZSBkb25lLicpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0Rm9yZWNhc3QoY2l0eU5hbWUpIHtcblxuXHRcdFx0cmV0dXJuIHdlYXRoZXJBUElTZXJ2aWNlLmdldEZvcmVjYXN0KGNpdHlOYW1lKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2V0Rm9yZWNhc3RTdWNjZXNzKGRhdGEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGdldEZvcmVjYXN0RmFpbGVkKGNpdHlOYW1lKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldEZvcmVjYXN0U3VjY2VzcyhjaXR5T2JqZWN0KSB7XG5cdFx0XHR2bS5jaXRpZXNPYmplY3RzLnVuc2hpZnQoY2l0eU9iamVjdCk7XG5cdFx0XHRhbGVydFN1Y2Nlc3MoY2l0eU9iamVjdC5jaXR5Lm5hbWUpO1xuXG5cdFx0XHRyZXR1cm4gY2l0eU9iamVjdDtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRGb3JlY2FzdEZhaWxlZChjaXR5TmFtZSkge1xuXHRcdFx0YWxlcnRFcnJvcihgQ291bGQgbm90IGZpbmQgY2l0eTogJHtjaXR5TmFtZX1gKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBvblN1Ym1pdCgpIHtcblx0XHRcdGlmIChpc0NpdHlJbkxpc3QoKSkge1xuXHRcdFx0XHRhbGVydEVycm9yKCdDaXR5IGFscmVhZHkgcHJlc2VudCwgcGxlYXNlIGFkZCBhbm90aGVyIGNpdHknKTtcblx0XHRcdFx0cmVzZXRBbGVydE9iamVjdCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGFsZXJ0RmV0Y2hpbmcoKTtcblxuXHRcdFx0XHRnZXRGb3JlY2FzdCh2bS5uZXdDaXR5KVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHZtLm5ld0NpdHkgPSAnJztcblx0XHRcdFx0XHRcdHJlc2V0QWxlcnRPYmplY3QoKTtcblxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHJlbW92ZUNpdHkoaW5kZXgpIHtcblx0XHRcdHZtLmNpdGllc09iamVjdHMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc0NpdHlJbkxpc3QoKSB7XG5cdFx0XHR2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdeJyArIHZtLm5ld0NpdHkgKyAnJCcsICdpJyk7XG5cblx0XHRcdHJldHVybiBfLmZpbmQodm0uY2l0aWVzT2JqZWN0cywgZnVuY3Rpb24gKGNpdHlPYmplY3QpIHtcblx0XHRcdFx0cmV0dXJuIGNpdHlPYmplY3QuY2l0eS5uYW1lLm1hdGNoKHJlZ2V4KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHJlc2V0QWxlcnRPYmplY3QoZGVsYXkgPSAzMDAwLCBtZXNzYWdlID0gJycpIHtcblx0XHRcdGlmIChtZXNzYWdlKSB7XG5cdFx0XHRcdHZtLmFsZXJ0Lm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdFx0fVxuXG5cdFx0XHQkdGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZtLmFsZXJ0Lm1lc3NhZ2UgID0gJyc7XG5cdFx0XHRcdHZtLmFsZXJ0LmNzc0NsYXNzID0gJ2FsZXJ0LXN1Y2Nlc3MnO1xuXHRcdFx0fSwgZGVsYXkpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGFsZXJ0U3VjY2VzcyhjaXR5TmFtZSkge1xuXHRcdFx0dm0uYWxlcnQubWVzc2FnZSAgPSBgJHtjaXR5TmFtZX0gd2FzIGFkZGVkIHN1Y2Nlc3NmdWxseWA7XG5cdFx0XHR2bS5hbGVydC5jc3NDbGFzcyA9ICdhbGVydC1zdWNjZXNzJztcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBhbGVydEZldGNoaW5nKCkge1xuXHRcdFx0dm0uYWxlcnQubWVzc2FnZSAgPSAnRmV0Y2hpbmcgZGF0YSwgcGxlYXNlIHdhaXQuLi4nO1xuXHRcdFx0dm0uYWxlcnQuY3NzQ2xhc3MgPSAnYWxlcnQtaW5mbyc7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYWxlcnRFcnJvcihtZXNzYWdlKSB7XG5cdFx0XHR2bS5hbGVydC5tZXNzYWdlICA9IG1lc3NhZ2U7XG5cdFx0XHR2bS5hbGVydC5jc3NDbGFzcyA9ICdhbGVydC1kYW5nZXInO1xuXHRcdH1cblxuXHRcdGluaXQoKTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ29wZW5XZWF0aGVyLmRpcmVjdGl2ZXMnLCBbXSlcblx0XHQuZGlyZWN0aXZlKCdjaXR5JywgY2l0eSk7XG5cblx0ZnVuY3Rpb24gY2l0eSgpIHtcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnZGlyZWN0aXZlcy9jaXR5L2NpdHkuaHRtbCcsXG5cdFx0XHRsaW5rOiBsaW5rLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0Y2l0eTogJz0nXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XG5cblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlKSB7XG5cblx0XHRcdHNjb3BlLm5hbWUgICAgICAgID0gZ2V0TmFtZSgpO1xuXHRcdFx0c2NvcGUuaWNvblVybCAgICAgPSBnZXRJY29uVXJsKCk7XG5cdFx0XHRzY29wZS5kZXNjcmlwdGlvbiA9IGdldERlc2NyaXB0aW9uKCk7XG5cdFx0XHRzY29wZS5tYXhUZW1wICAgICA9IGdldFRlbXBlcmF0dXJlKCkubWF4O1xuXHRcdFx0c2NvcGUubWluVGVtcCAgICAgPSBnZXRUZW1wZXJhdHVyZSgpLm1pbjtcblx0XHRcdHNjb3BlLmRhdGUgICAgICAgID0gZ2V0UGFyc2VkRGF0ZSgpO1xuXG5cdFx0XHRzY29wZS5nZXRQYXJzZWREYXRlICA9IGdldFBhcnNlZERhdGU7XG5cdFx0XHRzY29wZS5nZXRJY29uVXJsICAgICA9IGdldEljb25Vcmw7XG5cdFx0XHRzY29wZS5nZXREZXNjcmlwdGlvbiA9IGdldERlc2NyaXB0aW9uO1xuXG5cdFx0XHRmdW5jdGlvbiBnZXRGb3JlY2FzdExpc3QoKSB7XG5cdFx0XHRcdHJldHVybiBzY29wZS5jaXR5Lmxpc3Q7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGdldFdlYXRoZXJPYmplY3QoaW5kZXggPSAwKSB7XG5cdFx0XHRcdHJldHVybiBnZXRGb3JlY2FzdExpc3QoKVtpbmRleF0ud2VhdGhlclswXTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZ2V0SWNvblVybChpbmRleCA9IDApIHtcblx0XHRcdFx0cmV0dXJuIGdldFdlYXRoZXJPYmplY3QoaW5kZXgpLmljb247XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGdldE5hbWUoKSB7XG5cdFx0XHRcdHJldHVybiBzY29wZS5jaXR5LmNpdHkubmFtZTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24oaW5kZXggPSAwKSB7XG5cdFx0XHRcdHJldHVybiBnZXRXZWF0aGVyT2JqZWN0KGluZGV4KS5kZXNjcmlwdGlvbjtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZ2V0VGVtcGVyYXR1cmUoaW5kZXggPSAwKSB7XG5cdFx0XHRcdHJldHVybiBnZXRGb3JlY2FzdExpc3QoKVtpbmRleF0udGVtcDtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZ2V0UGFyc2VkRGF0ZShpbmRleCA9IDApIHtcblx0XHRcdFx0cmV0dXJuIGdldEZvcmVjYXN0TGlzdCgpW2luZGV4XS5kdCAqIDEwMDA7XG5cdFx0XHR9XG5cblx0XHR9XG5cdH1cblxufSkoKTsiXX0=
